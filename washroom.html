<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Washroom Management - MediCare Plus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white shadow-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-heartbeat text-2xl"></i>
                    <span class="text-xl font-bold">MediCare Plus</span>
                </div>
                <div class="hidden md:flex space-x-8 text-sm">
                    <a href="index.html" class="hover:text-blue-200 py-1">HOME</a>
                    <a href="service.html" class="hover:text-blue-200 py-1">SERVICES</a>
                    <a href="doctor.html" class="hover:text-blue-200 py-1">DOCTORS</a>
                    <a href="washroom.html" class="hover:text-blue-200 border-b-2 border-white py-1">WASHROOM MANAGEMENT</a>
                    <a href="logout.php" class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-4 py-2 rounded-lg shadow-md hover:from-cyan-600 hover:to-blue-700 transition">LOG-OUT</a>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-white">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-blue-600 pb-4 px-4">
            <div class="flex flex-col space-y-3 text-sm">
                <a href="index.html" class="hover:text-blue-200 py-1 border-b border-blue-500">HOME</a>
                <a href="service.html" class="hover:text-blue-200 py-1 border-b border-blue-500">SERVICES</a>
                <a href="doctor.html" class="hover:text-blue-200 py-1 border-b border-blue-500">DOCTORS</a>
                <a href="washroom.html" class="hover:text-blue-200 py-1 border-b border-blue-500">WASHROOM MANAGEMENT</a>
                <a href="#" class="hover:text-blue-200 py-1">CONTACT</a>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <div class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white py-12">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-2">Washroom Management System</h1>
            <p class="text-blue-100">Efficient monitoring and maintenance of facility washrooms</p>
        </div>
    </div>

    <!-- Dashboard Section -->
    <section class="py-10 bg-white shadow-md mb-6">
        <div class="container mx-auto px-4">
            <h2 class="text-2xl font-bold text-blue-800 mb-6">Dashboard Overview</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Stats Card 1 -->
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 shadow-sm border border-blue-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-blue-800 font-medium">Total Washrooms</p>
                            <h3 class="text-3xl font-bold text-blue-900 mt-1">24</h3>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-white">
                            <i class="fas fa-toilet text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 text-sm text-blue-700">
                        <span>Across 4 floors</span>
                    </div>
                </div>
                
                <!-- Stats Card 2 -->
                <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 shadow-sm border border-green-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-green-800 font-medium">Operational</p>
                            <h3 class="text-3xl font-bold text-green-900 mt-1">22</h3>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-green-600 flex items-center justify-center text-white">
                            <i class="fas fa-check-circle text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 text-sm text-green-700">
                        <span>91.7% available</span>
                    </div>
                </div>
                
                <!-- Stats Card 3 -->
                <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 shadow-sm border border-red-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-red-800 font-medium">Issues Reported</p>
                            <h3 class="text-3xl font-bold text-red-900 mt-1">2</h3>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-red-600 flex items-center justify-center text-white">
                            <i class="fas fa-exclamation-triangle text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 text-sm text-red-700">
                        <span>8.3% need attention</span>
                    </div>
                </div>
                
                <!-- Stats Card 4 -->
                <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-6 shadow-sm border border-yellow-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-yellow-800 font-medium">Cleaning Scheduled</p>
                            <h3 class="text-3xl font-bold text-yellow-900 mt-1">6</h3>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-yellow-600 flex items-center justify-center text-white">
                            <i class="fas fa-broom text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 text-sm text-yellow-700">
                        <span>Next in 45 minutes</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

  

    <!-- Issue Reporting Section -->
    <section class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Report Form -->
                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold text-blue-800 mb-4">Report an Issue</h2>
                    <p class="text-gray-600 mb-6">Please fill out this form to report any issues with the washrooms.</p>
                    
                    <form id="issue-report-form" action="process_report.php" method="post" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="floor" class="block text-sm font-medium text-gray-700 mb-1">Floor</label>
                                <select id="floor" name="floor" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="ground">Ground Floor</option>
                                    <option value="first">First Floor</option>
                                    <option value="second">Second Floor</option>
                                    <option value="third">Third Floor</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="washroom_id" class="block text-sm font-medium text-gray-700 mb-1">Washroom Location</label>
                                <select id="washroom_id" name="washroom_id" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="w101">W101 - Main Entrance</option>
                                    <option value="w102">W102 - East Wing</option>
                                    <option value="w103">W103 - Cafeteria</option>
                                    <option value="w104">W104 - West Wing</option>
                                    <option value="w201">W201 - Pediatrics</option>
                                    <option value="w202">W202 - ICU</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label for="issue_type" class="block text-sm font-medium text-gray-700 mb-1">Issue Type</label>
                            <select id="issue_type" name="issue_type" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="plumbing">Plumbing Issue</option>
                                <option value="cleaning">Needs Cleaning</option>
                                <option value="supplies">Out of Supplies</option>
                                <option value="fixture">Broken Fixture</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                            <textarea id="description" name="description" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Please provide details about the issue..."></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="reporter_name" class="block text-sm font-medium text-gray-700 mb-1">Your Name</label>
                                <input type="text" id="reporter_name" name="reporter_name" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="John Doe">
                            </div>
                            
                            <div>
                                <label for="reporter_dept" class="block text-sm font-medium text-gray-700 mb-1">Department</label>
                                <input type="text" id="reporter_dept" name="reporter_dept" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Nursing, Administration, etc.">
                            </div>
                        </div>
                        
                        <div>
                            <label for="urgency" class="block text-sm font-medium text-gray-700 mb-1">Urgency Level</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="urgency" value="low" class="text-blue-600 focus:ring-blue-500 h-4 w-4">
                                    <span class="ml-2 text-sm text-gray-700">Low</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="urgency" value="medium" class="text-blue-600 focus:ring-blue-500 h-4 w-4" checked>
                                    <span class="ml-2 text-sm text-gray-700">Medium</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="urgency" value="high" class="text-blue-600 focus:ring-blue-500 h-4 w-4">
                                    <span class="ml-2 text-sm text-gray-700">High</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:from-blue-700 hover:to-cyan-600 transition duration-300">
                                Submit Report <i class="fas fa-paper-plane ml-2"></i>
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Active Issues -->
                <div>
                    <div class="bg-white p-8 rounded-xl shadow-md border border-gray-200">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-blue-800">Active Issues</h2>
                            <span class="bg-red-100 text-red-800 text-xs font-semibold px-3 py-1.5 rounded-full">2 Issues</span>
                        </div>
                        
                        <div class="space-y-6">
                            <!-- Issue 1 -->
                            <div class="border-l-4 border-red-500 pl-4 py-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="font-semibold text-gray-800">Plumbing Issue - W103 (Cafeteria)</h3>
                                        <p class="text-sm text-gray-600 mt-1">Sink is leaking, water on the floor</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">In Progress</span>
                                </div>
                                <div class="flex justify-between items-center mt-3">
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i class="fas fa-clock mr-1"></i> Reported 3 hours ago
                                    </div>
                                    <div class="text-sm font-medium text-blue-600 hover:text-blue-800 cursor-pointer">View Details</div>
                                </div>
                            </div>
                            
                            <!-- Issue 2 -->
                            <div class="border-l-4 border-red-500 pl-4 py-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="font-semibold text-gray-800">Out of Supplies - W201 (Pediatrics)</h3>
                                        <p class="text-sm text-gray-600 mt-1">No paper towels and soap dispenser is empty</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">Assigned</span>
                                </div>
                                <div class="flex justify-between items-center mt-3">
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i class="fas fa-clock mr-1"></i> Reported 1 hour ago
                                    </div>
                                    <div class="text-sm font-medium text-blue-600 hover:text-blue-800 cursor-pointer">View Details</div>
                                </div>
                            </div>
                            
                            <!-- Resolved Issues Heading -->
                            <div class="border-t border-gray-200 pt-6 mt-8">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-gray-700">Recently Resolved</h3>
                                    <span class="text-sm text-blue-600 hover:text-blue-800 cursor-pointer">View All History</span>
                                </div>
                                
                                <!-- Resolved Issue -->
                                <div class="border-l-4 border-green-500 pl-4 py-1 opacity-75">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="font-semibold text-gray-800">Broken Fixture - W102 (East Wing)</h3>
                                            <p class="text-sm text-gray-600 mt-1">Door lock was not functioning properly</p>
                                        </div>
                                        <span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">Resolved</span>
                                    </div>
                                    <div class="flex justify-between items-center mt-3">
                                        <div class="flex items-center text-sm text-gray-500">
                                            <i class="fas fa-check-circle mr-1"></i> Fixed 2 days ago
                                        </div>
                                        <div class="text-sm font-medium text-blue-600 hover:text-blue-800 cursor-pointer">View Details</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Maintenance Schedule Preview -->
                    <div class="bg-gradient-to-br from-blue-50 to-white p-6 rounded-xl shadow-md mt-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-blue-800">Upcoming Maintenance</h3>
                            <span class="text-sm text-blue-600 hover:text-blue-800 cursor-pointer">Full Schedule</span>
                        </div>
                        
                        <ul class="space-y-3">
                            <li class="flex items-center">
                                <div class="w-2 h-2 bg-yellow-400 rounded-full mr-3"></div>
                                <span class="font-medium text-gray-700">Today, 2:00 PM</span>
                                <span class="mx-2 text-gray-400">•</span>
                                <span class="text-gray-600">Routine Cleaning - Ground Floor</span>
                            </li>
                            <li class="flex items-center">
                                <div class="w-2 h-2 bg-cyan-400 rounded-full mr-3"></div>
                                <span class="font-medium text-gray-700">Tomorrow, 9:00 AM</span>
                                <span class="mx-2 text-gray-400">•</span>
                                <span class="text-gray-600">Deep Cleaning - Second Floor</span>
                            </li>
                            <li class="flex items-center">
                                <div class="w-2 h-2 bg-purple-400 rounded-full mr-3"></div>
                                <span class="font-medium text-gray-700">Apr 12, 11:00 AM</span>
                                <span class="mx-2 text-gray-400">•</span>
                                <span class="text-gray-600">Quarterly Inspection - All Floors</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-blue-900 text-white pt-16 pb-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
                <div>
                    <div class="flex items-center space-x-2 mb-6">
                        <i class="fas fa-heartbeat text-2xl text-cyan-400"></i>
                        <span class="text-xl font-bold">MediCare Plus</span>
                    </div>
                    <p class="text-blue-200 mb-6">Providing quality healthcare services with compassion and care for over 25 years.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white hover:text-cyan-400 transition duration-300">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-white hover:text-cyan-400 transition duration-300">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-white hover:text-cyan-400 transition duration-300">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-white hover:text-cyan-400 transition duration-300">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold mb-6">Quick Links</h3>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Home</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">About Us</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Services</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Doctors</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Departments</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold mb-6">Our Services</h3>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Cardiology</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Neurology</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Orthopedics</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Pediatrics</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Dermatology</a></li>
                        <li><a href="#" class="text-blue-200 hover:text-white transition duration-300">Diagnostics</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold mb-6">Newsletter</h3>
                    <p class="text-blue-200 mb-6">Subscribe to our newsletter for health tips and hospital updates.</p>
                    <form id="newsletter-form" action="process.php" method="post" class="space-y-4">
                        <div>
                            <input type="email" name="newsletter_email" placeholder="Your Email Address" class="w-full p-3 rounded-lg bg-blue-800 border border-blue-700 text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" required>
                        </div>
                        <button type="submit" class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:from-blue-700 hover:to-cyan-600 transition duration-300 w-full">
                            Subscribe Now
                        </button>
                    </form>
                </div>
            </div>
            
            <hr class="border-blue-800 mb-8">
            
            <div class="flex flex-col md:flex-row justify-between items-center">
                <p class="text-blue-300 text-sm">&copy; 2025 MediCare Plus Hospital. All rights reserved.</p>
                <div class="flex space-x-6 mt-4 md:mt-0">
                    <a href="#" class="text-blue-300 text-sm hover:text-white transition duration-300">Privacy Policy</a>
                    <a href="#" class="text-blue-300 text-sm hover:text-white transition duration-300">Terms of Service</a>
                    <a href="#" class="text-blue-300 text-sm hover:text-white transition duration-300">Sitemap</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="fixed bottom-6 right-6 bg-blue-600 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transform translate-y-20 opacity-0 transition-all duration-300">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
// Mobile Menu Toggle
document.getElementById('mobile-menu-button').addEventListener('click', function() {
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenu.classList.toggle('hidden');
});

// Back to Top Button
const backToTopButton = document.getElementById('back-to-top');

window.addEventListener('scroll', function() {
    if (window.pageYOffset > 300) {
        backToTopButton.classList.remove('translate-y-20', 'opacity-0');
        backToTopButton.classList.add('translate-y-0', 'opacity-100');
    } else {
        backToTopButton.classList.add('translate-y-20', 'opacity-0');
        backToTopButton.classList.remove('translate-y-0', 'opacity-100');
    }
});

backToTopButton.addEventListener('click', function() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
});

// Sample washroom data (in a real application, this would come from a database)
const washroomData = {
    1: [ // Ground Floor
        { id: 'w101', name: 'W101', location: 'Main Entrance', status: 'operational', gender: 'Male', lastCleaned: '2 hours ago' },
        { id: 'w102', name: 'W102', location: 'East Wing', status: 'operational', gender: 'Female', lastCleaned: '1 hour ago' },
        { id: 'w103', name: 'W103', location: 'Cafeteria', status: 'issue', gender: 'Male', lastCleaned: '4 hours ago', issue: 'Plumbing' },
        { id: 'w104', name: 'W104', location: 'West Wing', status: 'operational', gender: 'Female', lastCleaned: '3 hours ago' },
        { id: 'w105', name: 'W105', location: 'Emergency', status: 'cleaning', gender: 'Unisex', lastCleaned: 'In progress' },
        { id: 'w106', name: 'W106', location: 'Reception', status: 'operational', gender: 'Accessible', lastCleaned: '2 hours ago' }
    ],
    2: [ // First Floor
        { id: 'w201', name: 'W201', location: 'Pediatrics', status: 'issue', gender: 'Unisex', lastCleaned: '5 hours ago', issue: 'Supplies' },
        { id: 'w202', name: 'W202', location: 'ICU', status: 'operational', gender: 'Staff', lastCleaned: '2 hours ago' },
        { id: 'w203', name: 'W203', location: 'Surgery Wing', status: 'operational', gender: 'Male', lastCleaned: '1 hour ago' },
        { id: 'w204', name: 'W204', location: 'Surgery Wing', status: 'operational', gender: 'Female', lastCleaned: '1 hour ago' },
        { id: 'w205', name: 'W205', location: 'Cardiology', status: 'cleaning', gender: 'Male', lastCleaned: 'In progress' },
        { id: 'w206', name: 'W206', location: 'Cardiology', status: 'operational', gender: 'Female', lastCleaned: '3 hours ago' }
    ],
    3: [ // Second Floor
        { id: 'w301', name: 'W301', location: 'Neurology', status: 'operational', gender: 'Male', lastCleaned: '2 hours ago' },
        { id: 'w302', name: 'W302', location: 'Neurology', status: 'operational', gender: 'Female', lastCleaned: '2 hours ago' },
        { id: 'w303', name: 'W303', location: 'Oncology', status: 'operational', gender: 'Male', lastCleaned: '4 hours ago' },
        { id: 'w304', name: 'W304', location: 'Oncology', status: 'operational', gender: 'Female', lastCleaned: '4 hours ago' },
        { id: 'w305', name: 'W305', location: 'Staff Area', status: 'cleaning', gender: 'Staff', lastCleaned: 'In progress' },
        { id: 'w306', name: 'W306', location: 'Labs', status: 'operational', gender: 'Unisex', lastCleaned: '3 hours ago' }
    ],
    4: [ // Third Floor
        { id: 'w401', name: 'W401', location: 'Orthopedics', status: 'operational', gender: 'Male', lastCleaned: '2 hours ago' },
        { id: 'w402', name: 'W402', location: 'Orthopedics', status: 'operational', gender: 'Female', lastCleaned: '2 hours ago' },
        { id: 'w403', name: 'W403', location: 'Administration', status: 'operational', gender: 'Male', lastCleaned: '1 hour ago' },
        { id: 'w404', name: 'W404', location: 'Administration', status: 'operational', gender: 'Female', lastCleaned: '1 hour ago' },
        { id: 'w405', name: 'W405', location: 'Meeting Rooms', status: 'operational', gender: 'Unisex', lastCleaned: '3 hours ago' },
        { id: 'w406', name: 'W406', location: 'Executive Wing', status: 'cleaning', gender: 'Accessible', lastCleaned: 'In progress' }
    ]
};

// Function to create visual floor plan
function createFloorPlan(floorNumber) {
    // This would typically load an actual floor plan SVG or image
    // For this demo, we'll create a simple grid layout
    const floorPlanContainer = document.getElementById('floor-plan-container');
    const placeholder = document.getElementById('floor-plan-placeholder');
    
    // Hide placeholder text
    placeholder.style.display = 'none';
    
    // Create a simple floor plan grid background
    let bgDiv = document.createElement('div');
    bgDiv.className = 'absolute top-0 left-0 w-full h-full bg-gray-100';
    bgDiv.style.backgroundImage = 'linear-gradient(#e5e7eb 1px, transparent 1px), linear-gradient(90deg, #e5e7eb 1px, transparent 1px)';
    bgDiv.style.backgroundSize = '20% 20%';
    
    // Add some floor-specific elements to make each floor look different
    switch(floorNumber) {
        case '1': // Ground Floor
            bgDiv.innerHTML = `
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1/2 h-1/3 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Main Lobby</span>
                </div>
                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 w-1/4 h-12 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Entrance</span>
                </div>
            `;
            break;
        case '2': // First Floor
            bgDiv.innerHTML = `
                <div class="absolute top-1/3 left-1/2 transform -translate-x-1/2 w-2/3 h-1/4 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Surgery Wing</span>
                </div>
                <div class="absolute bottom-1/4 left-1/4 w-1/3 h-1/4 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Pediatrics</span>
                </div>
            `;
            break;
        case '3': // Second Floor
            bgDiv.innerHTML = `
                <div class="absolute top-1/4 left-1/4 w-1/2 h-1/4 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Neurology</span>
                </div>
                <div class="absolute bottom-1/4 right-1/4 w-1/3 h-1/4 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Oncology</span>
                </div>
            `;
            break;
        case '4': // Third Floor
            bgDiv.innerHTML = `
                <div class="absolute top-1/4 right-1/4 w-2/5 h-1/4 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Administration</span>
                </div>
                <div class="absolute bottom-1/3 left-1/4 w-2/5 h-1/4 border-2 border-gray-300 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-500 font-semibold">Orthopedics</span>
                </div>
            `;
            break;
    }
    
    // Prepend to ensure markers appear on top
    floorPlanContainer.prepend(bgDiv);
    
    return true;
}

// Function to load floor data
function loadFloorData(floorNumber) {
    const washroomsList = document.getElementById('washrooms-list');
    const floorMarkers = document.getElementById('floor-markers');
    const floorData = washroomData[floorNumber];
    
    // Clear existing content
    washroomsList.innerHTML = '';
    floorMarkers.innerHTML = '';
    
    // Remove any existing floor plan
    const existingFloorPlan = document.querySelector('#floor-plan-container > div:first-child');
    if (existingFloorPlan) {
        existingFloorPlan.remove();
    }
    
    // Create visual floor plan
    createFloorPlan(floorNumber);
    
    // Show the placeholder or hide it based on floor data
    const placeholder = document.getElementById('floor-plan-placeholder');
    if (floorData && floorData.length > 0) {
        placeholder.style.display = 'none';
        
        // Create washroom markers with better positioning
        floorData.forEach((washroom, index) => {
            // Create a more dynamic and visually appealing layout
            // This uses a deterministic but pseudo-random layout that varies per floor
            const seed = parseInt(washroom.id.replace(/\D/g, ''));
            const xOffset = ((seed * 17) % 60) + 20; // 20% to 80% of width
            const yOffset = ((seed * 13) % 60) + 20; // 20% to 80% of height
            
            // Position markers strategically
            const left = xOffset + '%';
            const top = yOffset + '%';
            
            // Determine marker color based on status
            let markerColor = 'bg-green-500';
            let statusText = 'Operational';
            if (washroom.status === 'issue') {
                markerColor = 'bg-red-500';
                statusText = 'Issue';
            } else if (washroom.status === 'cleaning') {
                markerColor = 'bg-yellow-500';
                statusText = 'Cleaning';
            }
            
            // Create marker with improved visual design and tooltip
            const marker = document.createElement('div');
            marker.className = `absolute w-10 h-10 ${markerColor} rounded-full flex items-center justify-center text-white shadow-lg cursor-pointer z-10 transform hover:scale-110 transition-transform duration-200`;
            marker.style.left = left;
            marker.style.top = top;
            marker.innerHTML = `<span class="text-xs font-bold">${washroom.id.replace('w', '')}</span>`;
            marker.setAttribute('data-washroom-id', washroom.id);
            
            // Add tooltip with more info
            const tooltip = document.createElement('div');
            tooltip.className = 'absolute bottom-full left-1/2 transform -translate-x-1/2 -translate-y-2 bg-white text-gray-900 px-3 py-1 rounded shadow-lg text-xs whitespace-nowrap opacity-0 transition-opacity duration-200 pointer-events-none';
            tooltip.innerHTML = `${washroom.name} - ${washroom.location}<br>${washroom.gender} • ${statusText}`;
            marker.appendChild(tooltip);
            
            // Show/hide tooltip
            marker.addEventListener('mouseenter', () => {
                tooltip.classList.remove('opacity-0');
                tooltip.classList.add('opacity-100');
            });
            marker.addEventListener('mouseleave', () => {
                tooltip.classList.remove('opacity-100');
                tooltip.classList.add('opacity-0');
            });
            
            // Add click event
            marker.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent event bubbling
                highlightWashroom(washroom.id);
            });
            
            floorMarkers.appendChild(marker);
        });
        
        // Generate washroom list items with improved styling
        floorData.forEach(washroom => {
            // Determine status badge
            let statusBadge = '<span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Operational</span>';
            
            if (washroom.status === 'issue') {
                statusBadge = '<span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">Issue Reported</span>';
            } else if (washroom.status === 'cleaning') {
                statusBadge = '<span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">Cleaning</span>';
            }
            
            // Create list item with interactive elements
            const listItem = document.createElement('div');
            listItem.className = 'p-4 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition duration-200 cursor-pointer';
            listItem.setAttribute('data-washroom-id', washroom.id);
            
            listItem.innerHTML = `
                <div class="flex justify-between items-center">
                    <h4 class="font-semibold text-gray-800">${washroom.name} - ${washroom.location}</h4>
                    ${statusBadge}
                </div>
                <div class="mt-2 text-sm text-gray-600">
                    <span class="font-medium">${washroom.gender}</span> • Last cleaned: ${washroom.lastCleaned}
                </div>
                ${washroom.issue ? 
                    `<div class="mt-2 text-sm text-red-600">
                        <i class="fas fa-exclamation-circle mr-1"></i> Issue: ${washroom.issue}
                    </div>` 
                    : ''
                }
                <div class="mt-3 pt-2 border-t border-gray-100">
                    <button class="text-xs text-blue-600 hover:text-blue-800 transition duration-200">
                        <i class="fas fa-eye mr-1"></i> View Details
                    </button>
                </div>
            `;
            
            // Add click event to highlight on the map
            listItem.addEventListener('click', function() {
                highlightWashroom(washroom.id);
            });
            
            washroomsList.appendChild(listItem);
        });
    } else {
        placeholder.style.display = 'block';
    }
    
    // Add click handler for floor plan to clear highlights
    document.getElementById('floor-plan-container').addEventListener('click', function(e) {
        // Only clear if clicking on the background, not a marker
        if (e.target === this || e.target.id === 'floor-plan-placeholder' || e.target.tagName === 'DIV') {
            clearHighlights();
        }
    });
}

// Function to highlight a washroom when selected
function highlightWashroom(washroomId) {
    // Clear previous highlights
    clearHighlights();
    
    // Add highlight to selected washroom
    document.querySelectorAll(`[data-washroom-id="${washroomId}"]`).forEach(elem => {
        // Use different highlight styles for markers vs list items
        if (elem.parentElement.id === 'floor-markers') {
            // For markers on the map
            elem.classList.add('ring-4', 'ring-blue-300', 'z-20', 'scale-125');
            elem.style.boxShadow = '0 0 0 4px rgba(59, 130, 246, 0.5)';
        } else {
            // For list items
            elem.classList.add('ring-2', 'ring-blue-500', 'bg-blue-50');
            
            // Scroll to the list item with better positioning
            elem.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    });
    
    // Add a pulsing effect to make it more noticeable
    addPulseEffect(washroomId);
}

// Function to clear all highlights
function clearHighlights() {
    document.querySelectorAll('[data-washroom-id]').forEach(elem => {
        elem.classList.remove('ring-2', 'ring-blue-500', 'ring-4', 'ring-blue-300', 'z-20', 'scale-125', 'bg-blue-50');
        elem.style.boxShadow = '';
        
        // Remove any added animation elements
        const pulse = elem.querySelector('.pulse-effect');
        if (pulse) {
            pulse.remove();
        }
    });
}

// Function to add a subtle pulse effect to the selected washroom
function addPulseEffect(washroomId) {
    const marker = document.querySelector(`#floor-markers [data-washroom-id="${washroomId}"]`);
    if (marker) {
        const pulse = document.createElement('div');
        pulse.className = 'pulse-effect absolute w-full h-full rounded-full bg-blue-400 opacity-0 animate-ping';
        marker.appendChild(pulse);
        
        // Clean up animation after a few seconds
        setTimeout(() => {
            if (pulse && pulse.parentNode === marker) {
                pulse.remove();
            }
        }, 3000);
    }
}

// Floor Tab Switching with improved event handling
const floorTabs = document.querySelectorAll('#floor-tabs button');
const currentFloorTitle = document.getElementById('current-floor-title');

floorTabs.forEach(tab => {
    tab.addEventListener('click', function() {
        // Remove active class from all tabs
        floorTabs.forEach(t => {
            t.classList.remove('text-blue-600', 'border-blue-600');
            t.classList.add('text-gray-500', 'border-transparent');
            t.setAttribute('aria-selected', 'false');
        });
        
        // Add active class to clicked tab
        this.classList.remove('text-gray-500', 'border-transparent');
        this.classList.add('text-blue-600', 'border-blue-600');
        this.setAttribute('aria-selected', 'true');
        
        // Update current floor title
        const floorNumber = this.getAttribute('data-floor');
        let floorName = 'Ground Floor';
        
        switch(floorNumber) {
            case '1':
                floorName = 'Ground Floor';
                break;
            case '2':
                floorName = 'First Floor';
                break;
            case '3':
                floorName = 'Second Floor';
                break;
            case '4':
                floorName = 'Third Floor';
                break;
        }
        
        currentFloorTitle.textContent = floorName;
        
        // Load floor data with animation
        animateFloorChange(floorNumber);
    });
});

// Function to animate floor change
function animateFloorChange(floorNumber) {
    const floorPlanContainer = document.getElementById('floor-plan-container');
    const washroomsList = document.getElementById('washrooms-list');
    
    // Fade out
    floorPlanContainer.style.opacity = '0';
    washroomsList.style.opacity = '0';
    
    // Wait for fade out, then update and fade in
    setTimeout(() => {
        loadFloorData(floorNumber);
        
        setTimeout(() => {
            floorPlanContainer.style.opacity = '1';
            washroomsList.style.opacity = '1';
        }, 50);
    }, 300);
}

// Modified Form submission handling with more reliable approach
document.getElementById('issue-report-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Basic validation
    const description = document.getElementById('description').value.trim();
    const reporterName = document.getElementById('reporter_name').value.trim();
    
    if (!description) {
        alert('Please provide a description of the issue.');
        document.getElementById('description').focus();
        return;
    }
    
    if (!reporterName) {
        alert('Please enter your name.');
        document.getElementById('reporter_name').focus();
        return;
    }
    
    // Create XMLHttpRequest instead of using fetch API
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'process_report.php', true);
    
    // Prepare form data
    const formData = new FormData(this);
    
    // Handle response
    xhr.onload = function() {
        if (xhr.status >= 200 && xhr.status < 300) {
            // Success - PHP script executed
            try {
                // Try to parse as JSON if the response is in JSON format
                const response = JSON.parse(xhr.responseText);
                
                if (response.success) {
                    alert(`Thank you ${reporterName}!\n\nYour report has been submitted successfully.\nOur maintenance team has been notified and will address the issue shortly.`);
                } else {
                    alert(`Error: ${response.message || 'Unknown error occurred during submission.'}`);
                }
            } catch (e) {
                // If not JSON or parsing failed, just show success message
                alert(`Thank you ${reporterName}!\n\nYour report has been submitted successfully.\nOur maintenance team has been notified and will address the issue shortly.`);
            }
            
            // Reset the form
            document.getElementById('issue-report-form').reset();
        } else {
            // Error handling
            alert('There was a problem submitting your report. Please try again later.');
            console.error('Form submission error:', xhr.statusText);
        }
    };
    
    // Handle network errors
    xhr.onerror = function() {
        alert('Network error occurred. Please check your connection and try again.');
        console.error('Network error during form submission');
    };
    
    // Fallback option - form submission if XHR fails or isn't supported
    xhr.onabort = function() {
        // Fallback to traditional form submission
        document.getElementById('issue-report-form').submit();
    };
    
    // Send the form data
    xhr.send(formData);
});

// Add fade transition styles for floor changes
document.getElementById('floor-plan-container').style.transition = 'opacity 0.3s ease';
document.getElementById('washrooms-list').style.transition = 'opacity 0.3s ease';

// Create a simple CSS animation for the pulse effect
const styleElement = document.createElement('style');
styleElement.textContent = `
    @keyframes ping {
        0% {
            transform: scale(0.5);
            opacity: 0.7;
        }
        70%, 100% {
            transform: scale(2);
            opacity: 0;
        }
    }
    .animate-ping {
        animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
    }
`;
document.head.appendChild(styleElement);

// Initialize with ground floor data and make sure everything is visible
loadFloorData(1);
document.addEventListener('DOMContentLoaded', function() {
    // Force visibility of elements
    const floorPlanContainer = document.getElementById('floor-plan-container');
    const washroomsList = document.getElementById('washrooms-list');
    
    if (floorPlanContainer) {
        floorPlanContainer.style.opacity = '1';
        floorPlanContainer.style.height = 'auto';
        floorPlanContainer.style.minHeight = '24rem';
        floorPlanContainer.style.display = 'block';
        floorPlanContainer.style.visibility = 'visible';
    }
    
    if (washroomsList) {
        washroomsList.style.opacity = '1';
        washroomsList.style.height = 'auto';
        washroomsList.style.minHeight = '24rem';
        washroomsList.style.display = 'block';
        washroomsList.style.visibility = 'visible';
    }
    
    // Ensure the floor data is loaded after a short delay
    setTimeout(() => {
        // Force reload the ground floor data
        if (typeof loadFloorData === 'function') {
            loadFloorData(1);
            console.log('Floor data loaded');
        } else {
            console.error('loadFloorData function not available');
        }
    }, 500);
});






    </script>
</body>
</html>